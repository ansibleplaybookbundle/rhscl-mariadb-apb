FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNz\
d29yZAogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogQSByYW5kb20gYWxwaGFudW1l\
cmljIHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgLSBu\
YW1lOiBteXNxbF91c2VyCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICBk\
ZXNjcmlwdGlvbjogTWFyaWFEQiBVc2VyCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlz\
cWxfcGFzc3dvcmQKICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRpb246IEEgcmFuZG9tIGFs\
cGhhbnVtZXJpYyBzdHJpbmcgaWYgbGVmdCBibGFuawogICAgcmVxdWlyZWQ6IGZhbHNlCiAgICBk\
aXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgLSBuYW1lOiBtYXJpYWRiX3ZlcnNpb24KICAgIGRlZmF1\
bHQ6ICIxMC4wIgogICAgZW51bTogWycxMC4wJywgJzEwLjEnXQogICAgdHlwZTogZW51bQogICAg\
dGl0bGU6IE1hcmlhREIgVmVyc2lvbgogICAgcmVxdWlyZWQ6IHRydWUKCnZlcnNpb246IDEuMApu\
YW1lOiByaHNjbC1tYXJpYWRiLWFwYgpkZXNjcmlwdGlvbjogTWFyaWFkYiBhcGIgaW1wbGVtZW50\
YXRpb24KYmluZGFibGU6IHRydWUKYXN5bmM6IG9wdGlvbmFsCnRhZ3M6CiAgLSBkYXRhYmFzZXMK\
ICAtIG1hcmlhZGIKbWV0YWRhdGE6CiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vbWFyaWFk\
Yi5jb20va2IvZW4vbWFyaWFkYi9kb2N1bWVudGF0aW9uLyIKICBsb25nRGVzY3JpcHRpb246ICJE\
ZXBsb3lzIGEgYmluZGFibGUgbWFyaWFkYiBpbnN0YW5jZSIKICBkZXBlbmRlbmNpZXM6CiAgICAt\
ICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEwMC1yaGVsNycKICAg\
IC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL21hcmlhZGItMTAxLXJoZWw3Jwog\
IGRpc3BsYXlOYW1lOiAiTWFyaWFEQiAoQVBCKSIKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29u\
Q2xhc3M6IGljb24tbWFyaWFkYgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMu\
IgpwbGFuczoKICAtIG5hbWU6IGRldgogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lz\
IGEgc2luZ2xlIE1hcmlhREIgaW5zdGFuY2Ugd2l0aCBlcGhlbWVyYWwgc3RvcmFnZQogICAgZnJl\
ZTogdHJ1ZQogICAgZGVmYXVsdDogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1l\
OiBEZXZlbG9wbWVudAogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wYXJhbXMK\
ICAtIG5hbWU6IHByb2QKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIHNpbmds\
ZSBNYXJpYURCIGluc3RhbmNlIHdpdGggMTAgR2lCIG9mIHBlcnNpc3RlbnQgc3RvcmFnZQogICAg\
ZnJlZTogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBQcm9kdWN0aW9uCiAg\
ICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqX3BhcmFtcwpyZXF1aXJlZDoKICAtIG1h\
cmlhZGJfdmVyc2lvbgogIC0gbXlzcWxfZGF0YWJhc2UKICAtIG15c3FsX3VzZXIKCg=="



COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
