FROM ansibleplaybookbundle/apb-base:canary
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEt\
WjAtOV9dKiQiCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNzd29y\
ZAogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogQSByYW5kb20gYWxwaGFudW1lcmlj\
IHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICByZXF1\
aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfdXNlcgogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5\
cGU6IHN0cmluZwogICAgcGF0dGVybjogIl5bYS16QS1aMC05X10qW2EtekEtWl9dK1thLXpBLVow\
LTlfXSokIgogICAgcmVxdWlyZWQ6IHRydWUKICAgIGRlc2NyaXB0aW9uOiBNYXJpYURCIFVzZXIK\
ICAtIG5hbWU6IG15c3FsX3Bhc3N3b3JkCiAgICB0eXBlOiBzdHJpbmcKICAgIGRlc2NyaXB0aW9u\
OiBBIHJhbmRvbSBhbHBoYW51bWVyaWMgc3RyaW5nIGlmIGxlZnQgYmxhbmsKICAgIHJlcXVpcmVk\
OiB0cnVlCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgLSBuYW1lOiBtYXJpYWRiX3ZlcnNp\
b24KICAgIGRlZmF1bHQ6ICIxMC4yIgogICAgZW51bTogWycxMC4yJyAsICcxMC4xJywgJzEwLjAn\
XQogICAgdHlwZTogZW51bQogICAgdGl0bGU6IE1hcmlhREIgVmVyc2lvbgogICAgcmVxdWlyZWQ6\
IHRydWUKICAgIHVwZGF0YWJsZTogdHJ1ZQoKdmVyc2lvbjogMS4wCm5hbWU6IG1hcmlhZGItYXBi\
CmRlc2NyaXB0aW9uOiBNYXJpYWRiIGFwYiBpbXBsZW1lbnRhdGlvbgpiaW5kYWJsZTogdHJ1ZQph\
c3luYzogb3B0aW9uYWwKdGFnczoKICAtIGRhdGFiYXNlCiAgLSBtYXJpYWRiCm1ldGFkYXRhOgog\
IGRvY3VtZW50YXRpb25Vcmw6ICJodHRwczovL21hcmlhZGIuY29tL2tiL2VuL21hcmlhZGIvZG9j\
dW1lbnRhdGlvbi8iCiAgbG9uZ0Rlc2NyaXB0aW9uOiAiRGVwbG95cyBhIGJpbmRhYmxlIG1hcmlh\
ZGIgaW5zdGFuY2UiCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhh\
dC5jb20vcmhzY2wvbWFyaWFkYi0xMDAtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVk\
aGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEwMS1yaGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5y\
ZWRoYXQuY29tL3Joc2NsL21hcmlhZGItMTAyLXJoZWw3JwogIGRpc3BsYXlOYW1lOiAiTWFyaWFE\
QiAoQVBCKSIKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGljb24tbWFyaWFkYgog\
IHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5hbWU6IGRl\
dgogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIE1hcmlhREIgaW5z\
dGFuY2Ugd2l0aCBlcGhlbWVyYWwgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQogICAgZGVmYXVsdDog\
dHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZXZlbG9wbWVudAogICAgICBj\
b3N0OiAkMC4wMAogICAgcGFyYW1ldGVyczogKl9wYXJhbXMKICAgIHVwZGF0ZXNfdG86CiAgICAg\
IC0gcHJvZAogIC0gbmFtZTogcHJvZAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lz\
IGEgc2luZ2xlIE1hcmlhREIgaW5zdGFuY2Ugd2l0aCAxMCBHaUIgb2YgcGVyc2lzdGVudCBzdG9y\
YWdlCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IFByb2R1\
Y3Rpb24KICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6ICpfcGFyYW1zCiAgICB1cGRh\
dGVzX3RvOgogICAgICAtIGRldgo="



COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
