FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9wYXJhbXM6ICZfcGFyYW1zCiAgLSBuYW1lOiBteXNx\
bF9kYXRhYmFzZQogICAgZGVmYXVsdDogYWRtaW4KICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3Jp\
cHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICB0aXRsZTogTWFyaWFEQiBE\
YXRhYmFzZSBuYW1lCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlzcWxfcm9vdF9wYXNz\
d29yZAogICAgdHlwZTogc3RyaW5nCiAgICBkZXNjcmlwdGlvbjogQSByYW5kb20gYWxwaGFudW1l\
cmljIHN0cmluZyBpZiBsZWZ0IGJsYW5rCiAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgLSBu\
YW1lOiBteXNxbF91c2VyCiAgICBkZWZhdWx0OiBhZG1pbgogICAgdHlwZTogc3RyaW5nCiAgICBk\
ZXNjcmlwdGlvbjogTWFyaWFEQiBVc2VyCiAgICByZXF1aXJlZDogdHJ1ZQogIC0gbmFtZTogbXlz\
cWxfcGFzc3dvcmQKICAgIHR5cGU6IHN0cmluZwogICAgZGVzY3JpcHRpb246IEEgcmFuZG9tIGFs\
cGhhbnVtZXJpYyBzdHJpbmcgaWYgbGVmdCBibGFuawogICAgcmVxdWlyZWQ6IGZhbHNlCiAgICBk\
aXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgLSBuYW1lOiBtYXJpYWRiX3ZlcnNpb24KICAgIGRlZmF1\
bHQ6ICIxMC4wIgogICAgZW51bTogWycxMC4wJywgJzEwLjEnXQogICAgdHlwZTogZW51bQogICAg\
dGl0bGU6IE1hcmlhREIgVmVyc2lvbgogICAgcmVxdWlyZWQ6IHRydWUKCnZlcnNpb246IDEuMApu\
YW1lOiByaHNjbC1tYXJpYWRiLWFwYgpkZXNjcmlwdGlvbjogTWFyaWFkYiBhcGIgaW1wbGVtZW50\
YXRpb24KYmluZGFibGU6IHRydWUKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRvY3VtZW50\
YXRpb25Vcmw6ICJodHRwczovL21hcmlhZGIuY29tL2tiL2VuL21hcmlhZGIvZG9jdW1lbnRhdGlv\
bi8iCiAgbG9uZ0Rlc2NyaXB0aW9uOiAiRGVwbG95cyBhIGJpbmRhYmxlIG1hcmlhZGIgaW5zdGFu\
Y2UiCiAgZGVwZW5kZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5jb20vcmhz\
Y2wvbWFyaWFkYi0xMDAtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9y\
aHNjbC9tYXJpYWRiLTEwMS1yaGVsNycKICBkaXNwbGF5TmFtZTogIlJIU0NMIE1hcmlhREIgKEFQ\
QikiCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBpY29uLW1hcmlhZGIKICBwcm92\
aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZXYKICAg\
IGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBhIHNpbmdsZSBNYXJpYURCIGluc3RhbmNl\
IHdpdGggZXBoZW1lcmFsIHN0b3JhZ2UKICAgIGZyZWU6IHRydWUKICAgIGRlZmF1bHQ6IHRydWUK\
ICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogRGV2ZWxvcG1lbnQKICAgICAgY29zdDog\
JDAuMDAKICAgIHBhcmFtZXRlcnM6ICpfcGFyYW1zCiAgLSBuYW1lOiBwcm9kCiAgICBkZXNjcmlw\
dGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUgTWFyaWFEQiBpbnN0YW5jZSB3aXRoIDEw\
IEdpQiBvZiBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgIGZyZWU6IHRydWUKICAgIG1ldGFkYXRhOgog\
ICAgICBkaXNwbGF5TmFtZTogUHJvZHVjdGlvbgogICAgICBjb3N0OiAkMC4wMAogICAgcGFyYW1l\
dGVyczogKl9wYXJhbXMKcmVxdWlyZWQ6CiAgLSBtYXJpYWRiX3ZlcnNpb24KICAtIG15c3FsX2Rh\
dGFiYXNlCiAgLSBteXNxbF91c2VyCgo="


COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
