FROM ansibleplaybookbundle/apb-base:canary
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCgp2ZXJzaW9uOiAxLjAKbmFtZTogbWFyaWFkYi1hcGIKZGVzY3JpcHRpb246IE1hcmlhZGIg\
YXBiIGltcGxlbWVudGF0aW9uCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgog\
IC0gZGF0YWJhc2UKICAtIG1hcmlhZGIKbWV0YWRhdGE6CiAgZG9jdW1lbnRhdGlvblVybDogImh0\
dHBzOi8vbWFyaWFkYi5jb20va2IvZW4vbWFyaWFkYi9kb2N1bWVudGF0aW9uLyIKICBsb25nRGVz\
Y3JpcHRpb246ICJEZXBsb3lzIGEgYmluZGFibGUgbWFyaWFkYiBpbnN0YW5jZSIKICBkZXBlbmRl\
bmNpZXM6CiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9tYXJpYWRiLTEw\
MC1yaGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL21hcmlhZGIt\
MTAxLXJoZWw3JwogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvbWFyaWFk\
Yi0xMDItcmhlbDcnCiAgZGlzcGxheU5hbWU6ICJNYXJpYURCIChBUEIpIgogIGNvbnNvbGUub3Bl\
bnNoaWZ0LmlvL2ljb25DbGFzczogaWNvbi1tYXJpYWRiCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTog\
IlJlZCBIYXQsIEluYy4iCnBsYW5zOgogIC0gbmFtZTogZGV2CiAgICBkZXNjcmlwdGlvbjogVGhp\
cyBwbGFuIGRlcGxveXMgYSBzaW5nbGUgTWFyaWFEQiBpbnN0YW5jZSB3aXRoIGVwaGVtZXJhbCBz\
dG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBkZWZhdWx0OiB0cnVlCiAgICBtZXRhZGF0YToKICAg\
ICAgZGlzcGxheU5hbWU6IERldmVsb3BtZW50CiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0\
ZXJzOgogICAgICAtIG5hbWU6IG1hcmlhZGJfZGF0YWJhc2UKICAgICAgICBkZWZhdWx0OiBhZG1p\
bgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlc2NyaXB0aW9uOiBNYXJpYURCIGRlZmF1\
bHQgZGF0YWJhc2UgbmFtZQogICAgICAgIHRpdGxlOiBNYXJpYURCIERhdGFiYXNlIE5hbWUKICAg\
ICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAg\
ICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBtYXJpYWRiX3Jvb3RfcGFzc3dvcmQK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogTWFyaWFEQiBSb290IFBhc3N3b3JkCiAg\
ICAgIC0gbmFtZTogbWFyaWFkYl91c2VyCiAgICAgICAgZGVmYXVsdDogYWRtaW4KICAgICAgICB0\
eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2Et\
ekEtWjAtOV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogTWFyaWFE\
QiBVc2VyCiAgICAgIC0gbmFtZTogbWFyaWFkYl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAog\
ICAgICAgIHRpdGxlOiBNYXJpYURCIFBhc3N3b3JkCiAgICAgIC0gbmFtZTogbWFyaWFkYl92ZXJz\
aW9uCiAgICAgICAgZGVmYXVsdDogIjEwLjIiCiAgICAgICAgZW51bTogWycxMC4yJyAsICcxMC4x\
JywgJzEwLjAnXQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICB0aXRsZTogTWFyaWFEQiBWZXJz\
aW9uCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB1cGRhdGFibGU6IHRydWUKICAgIHVw\
ZGF0ZXNfdG86CiAgICAgIC0gcHJvZAogIC0gbmFtZTogcHJvZAogICAgZGVzY3JpcHRpb246IFRo\
aXMgcGxhbiBkZXBsb3lzIGEgc2luZ2xlIE1hcmlhREIgaW5zdGFuY2Ugd2l0aCAxMCBHaUIgb2Yg\
cGVyc2lzdGVudCBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlz\
cGxheU5hbWU6IFByb2R1Y3Rpb24KICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6CiAg\
ICAgIC0gbmFtZTogbWFyaWFkYl9kYXRhYmFzZQogICAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAg\
ICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVzY3JpcHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRh\
YmFzZSBuYW1lCiAgICAgICAgdGl0bGU6IE1hcmlhREIgRGF0YWJhc2UgTmFtZQogICAgICAgIHBh\
dHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IG1hcmlhZGJfcm9vdF9wYXNzd29yZAogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1\
aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBNYXJpYURCIFJvb3QgUGFzc3dvcmQKICAgICAgLSBu\
YW1lOiBtYXJpYWRiX3VzZXIKICAgICAgICBkZWZhdWx0OiBhZG1pbgogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05\
X10qJCIKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBNYXJpYURCIFVzZXIK\
ICAgICAgLSBuYW1lOiBtYXJpYWRiX3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAg\
dGl0bGU6IE1hcmlhREIgUGFzc3dvcmQKICAgICAgLSBuYW1lOiBtYXJpYWRiX3ZlcnNpb24KICAg\
ICAgICBkZWZhdWx0OiAiMTAuMiIKICAgICAgICBlbnVtOiBbJzEwLjInICwgJzEwLjEnLCAnMTAu\
MCddCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIHRpdGxlOiBNYXJpYURCIFZlcnNpb24KICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgICAtIG5hbWU6\
IHZvbHVtZV9zaXplCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGRlZmF1bHQ6ICcxR2knCiAg\
ICAgICAgZW51bTogWycxR2knLCAnNUdpJywgJzEwR2knXQogICAgICAgIHRpdGxlOiBQb3N0Z3Jl\
U1FMIFZvbHVtZSBTaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIHVwZGF0ZXNfdG86CiAg\
ICAgIC0gZGV2Cg=="



COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
